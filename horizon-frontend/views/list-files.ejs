<!DOCTYPE html>
<html>
    <head>
        <title>Home - HorizonBackbone</title>
        <link rel='stylesheet' href='/stylesheets/patternfly.min.css'/>
        <link
            rel="stylesheet"
            href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
    </head>
    <body>
        <div class="pf-v5-c-page">
            <header class="pf-v5-c-masthead">
                <span class="pf-v5-c-masthead__toggle">
                    <button
                        class="pf-v5-c-button pf-m-plain"
                        type="button"
                        aria-label="Global navigation"
                        onclick="document.getElementById('nav').classList.toggle('pf-m-expanded');">
                        <i class="fas fa-bars" aria-hidden="true"></i>
                    </button>
                </span>
                <div class="pf-v5-c-masthead__main">
                    <a class="pf-v5-c-masthead__brand" href="#"><img src="/images/only-logo-no-background.png" width="32px" alt="Logo"></a>
                </div>
                <div class="pf-v5-c-masthead__content">
                    <span>HorizonBackbone</span>
                    <div class="pf-v5-c-page__header-tools">
                        <div class="pf-v5-c-toolbar__item pf-m-hidden pf-m-visible-on-sm">
                            <button
                                class="pf-v5-c-menu-toggle pf-m-full-height"
                                type="button"
                                aria-expanded="false"
                                onclick="document.getElementById('user-menu').classList.toggle('pf-m-expanded');">
                                <span class="pf-v5-c-menu-toggle__icon">
                                    <img
                                        class="pf-v5-c-avatar"
                                        alt="Avatar image"
                                        src="/images/img_avatar-light.svg">
                                </span>
                                <span class="pf-v5-c-menu-toggle__text">User</span>
                                <span class="pf-v5-c-menu-toggle__controls">
                                    <span class="pf-v5-c-menu-toggle__toggle-icon">
                                        <a href="#">Logout</a>
                                    </span>
                                </span>
                            </button>
                        </div>

                    </div>

                </div>

            </header>

            <div id="nav" class="pf-v5-c-page__sidebar">
                <div class="pf-v5-c-page__sidebar-body">
                    <nav class="pf-v5-c-nav" aria-label="Global">
                        <section class="pf-v5-c-nav__section" aria-labelledby="group_home">
                            <ul class="pf-v5-c-nav__list" role="list">
                                <li class="pf-v5-c-nav__item">
                                    <a href="/" class="pf-v5-c-nav__link pf-m-current" aria-current="page">Home</a>
                                </li>
                            </ul>
                        </section>
                        <section class="pf-v5-c-nav__section" aria-labelledby="group_c2">
                            <h2 class="pf-v5-c-nav__section-title" id="grouped-title1">Command & Control</h2>
                            <ul class="pf-v5-c-nav__list" role="list">
                                <li class="pf-v5-c-nav__item">
                                    <a href="/c2/campaigns" class="pf-v5-c-nav__link">Campaigns</a>
                                </li>
                                <li class="pf-v5-c-nav__item">
                                    <a href="/c2/agents" class="pf-v5-c-nav__link">Agents</a>
                                </li>
                                <li class="pf-v5-c-nav__item">
                                    <a href="/c2/broadcast" class="pf-v5-c-nav__link">Broadcast</a>
                                </li>
                            </ul>
                        </section>
                        <section class="pf-v5-c-nav__section" aria-labelledby="group_file_exfil">
                            <h2 class="pf-v5-c-nav__section-title" id="grouped-title2">Files</h2>
                            <ul class="pf-v5-c-nav__list" role="list">
                                <li class="pf-v5-c-nav__item">
                                    <a href="#" class="pf-v5-c-nav__link">Delivery</a>
                                </li>
                                <li class="pf-v5-c-nav__item">
                                    <a href="/list-files" class="pf-v5-c-nav__link">Data Exfiltration</a>
                                </li>
                            </ul>
                        </section>
                        <section class="pf-v5-c-nav__section" aria-labelledby="group_system">
                            <h2 class="pf-v5-c-nav__section-title" id="grouped-title2">System</h2>
                            <ul class="pf-v5-c-nav__list" role="list">
                                <li class="pf-v5-c-nav__item">
                                    <a href="#" class="pf-v5-c-nav__link">User Management</a>
                                </li>
                                <li class="pf-v5-c-nav__item">
                                    <a href="#" class="pf-v5-c-nav__link">Extra Modules</a>
                                </li>
                                <li class="pf-v5-c-nav__item">
                                    <a href="#" class="pf-v5-c-nav__link">Support</a>
                                </li>
                            </ul>
                        </section>
                    </nav>
                </div>
            </div>
            <main class="pf-v5-c-page__main" tabindex="-1">
                <section class="pf-v5-c-page__main-section pf-m-light">
                    <div class="pf-v5-c-content">
                        <h1>Agents</h1>
                        <p>
                            This is the agent overview. Here you can see all agents that are currently
                            connected to the server.
                        </p>
                        <!-- inline button for upload -->
                        <button
                            class="pf-v5-c-button pf-m-inline pf-m-primary"
                            type="button"
                            onclick="alert('TODO: add popup for upload')">
                            <i class="fas fa-plus" aria-hidden="true"></i>
                            Upload files
                        </button>
                        <!-- inline button for refresh -->
                        <button
                            class="pf-v5-c-button pf-m-inline"
                            type="button"
                            onclick="location.reload();">
                            <i class="fas fa-sync-alt" aria-hidden="true"></i>
                            Refresh
                        </button>
                    </div>
                </section>

                <!-- section for file list -->
                <section class="pf-v5-c-page__main-section">
                    <div class="pf-v5-c-content">
                        <div class="pf-v5-l-grid pf-m-gutter">
                            <div class="pf-v5-c-card">
                                <div class="pf-v5-c-card__header">
                                    <h2 class="pf-v5-c-card__title">Files</h2>
                                </div>
                                <div class="pf-v5-c-card__body">
                                    <table class="pf-v5-c-table pf-m-compact pf-m-grid-md">
                                        <thead class="pf-v5-c-table__thead">
                                            <tr class="pf-v5-c-table__tr" role="row">
                                                <th class="pf-v5-c-table__th" role="columnheader" scope="col">Filename</th>
                                                <th class="pf-v5-c-table__th" role="columnheader" scope="col">Size</th>
                                                <th class="pf-v5-c-table__th" role="columnheader" scope="col">Last change</th>
                                                <th class="pf-v5-c-table__th" role="columnheader" scope="col"></th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <% if(file_list) { %>
                                                <% file_list.forEach(function(file) { %>
                                                    <tr class="pf-v5-c-table__tr" role="row">
                                                        <td class="pf-v5-c-table__td" role="cell"><%= file.name %></td>
                                                        <td class="pf-v5-c-table__td" role="cell"><%= file.size %></td>
                                                        <td class="pf-v5-c-table__td" role="cell"><%= file.date %></td>
                                                        <td class="pf-v5-c-table__td" role="cell">
                                                            <a href="/api/file/download/<%= file.name %>" class="pf-v5-c-button pf-m-primary">Download</a>
                                                        </td>
                                                    </tr>
                                                <% }); %>
                                            <% } else { %>
                                                <tr class="pf-v5-c-table__tr" role="row">
                                                    <td class="pf-v5-c-table__td" role="cell" colspan="4">No files found.</td>
                                                </tr>
                                            <% } %>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>
            </main>
        </div>
    </body>
</html>